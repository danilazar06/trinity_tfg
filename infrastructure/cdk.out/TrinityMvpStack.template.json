{
 "Description": "Trinity MVP - Aplicaci√≥n para consensuar contenido multimedia en grupo",
 "Resources": {
  "UsersTable9725E9C8": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "userId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "userId",
      "KeyType": "HASH"
     }
    ],
    "TableName": "trinity-users-dev"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/UsersTable/Resource"
   }
  },
  "RoomsTableA5C1D45B": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "roomId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "roomId",
      "KeyType": "HASH"
     }
    ],
    "TableName": "trinity-rooms-dev"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/RoomsTable/Resource"
   }
  },
  "RoomMembersTable66DCF076": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "roomId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "userId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "joinedAt",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "UserHistoryIndex",
      "KeySchema": [
       {
        "AttributeName": "userId",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "joinedAt",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "roomId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "userId",
      "KeyType": "RANGE"
     }
    ],
    "TableName": "trinity-room-members-dev"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/RoomMembersTable/Resource"
   }
  },
  "VotesTable39A917AC": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "roomId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "movieId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "roomId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "movieId",
      "KeyType": "RANGE"
     }
    ],
    "TableName": "trinity-votes-dev"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/VotesTable/Resource"
   }
  },
  "UserVotesTable592E0AEF": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "userId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "roomMovieId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "userId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "roomMovieId",
      "KeyType": "RANGE"
     }
    ],
    "TableName": "trinity-user-votes-dev"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/UserVotesTable/Resource"
   }
  },
  "MoviesCacheTableE1998D48": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "tmdbId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "tmdbId",
      "KeyType": "HASH"
     }
    ],
    "TableName": "trinity-movies-cache-dev",
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/MoviesCacheTable/Resource"
   }
  },
  "TrinityUserPool2A37BF21": {
   "Type": "AWS::Cognito::UserPool",
   "Properties": {
    "AccountRecoverySetting": {
     "RecoveryMechanisms": [
      {
       "Name": "verified_email",
       "Priority": 1
      }
     ]
    },
    "AdminCreateUserConfig": {
     "AllowAdminCreateUserOnly": false
    },
    "AutoVerifiedAttributes": [],
    "EmailVerificationMessage": "The verification code to your new account is {####}",
    "EmailVerificationSubject": "Verify your new account",
    "LambdaConfig": {
     "PostConfirmation": {
      "Fn::GetAtt": [
       "AuthHandler9DC767B7",
       "Arn"
      ]
     }
    },
    "Policies": {
     "PasswordPolicy": {
      "MinimumLength": 8,
      "RequireLowercase": true,
      "RequireNumbers": true,
      "RequireSymbols": false,
      "RequireUppercase": true
     }
    },
    "SmsVerificationMessage": "The verification code to your new account is {####}",
    "UserPoolName": "trinity-users-dev",
    "UsernameAttributes": [
     "email"
    ],
    "VerificationMessageTemplate": {
     "DefaultEmailOption": "CONFIRM_WITH_CODE",
     "EmailMessage": "The verification code to your new account is {####}",
     "EmailSubject": "Verify your new account",
     "SmsMessage": "The verification code to your new account is {####}"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityUserPool/Resource"
   }
  },
  "TrinityUserPoolTrinityMobileClientE4889438": {
   "Type": "AWS::Cognito::UserPoolClient",
   "Properties": {
    "AccessTokenValidity": 60,
    "AllowedOAuthFlows": [
     "implicit",
     "code"
    ],
    "AllowedOAuthFlowsUserPoolClient": true,
    "AllowedOAuthScopes": [
     "email",
     "openid",
     "profile"
    ],
    "CallbackURLs": [
     "trinity://auth/callback",
     "https://trinity.app/auth/callback"
    ],
    "ClientName": "trinity-mobile-dev",
    "ExplicitAuthFlows": [
     "ALLOW_USER_PASSWORD_AUTH",
     "ALLOW_ADMIN_USER_PASSWORD_AUTH",
     "ALLOW_CUSTOM_AUTH",
     "ALLOW_USER_SRP_AUTH",
     "ALLOW_REFRESH_TOKEN_AUTH"
    ],
    "GenerateSecret": false,
    "IdTokenValidity": 60,
    "LogoutURLs": [
     "trinity://auth/logout",
     "https://trinity.app/auth/logout"
    ],
    "RefreshTokenValidity": 43200,
    "SupportedIdentityProviders": [
     "COGNITO",
     "Google"
    ],
    "TokenValidityUnits": {
     "AccessToken": "minutes",
     "IdToken": "minutes",
     "RefreshToken": "minutes"
    },
    "UserPoolId": {
     "Ref": "TrinityUserPool2A37BF21"
    }
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityUserPool/TrinityMobileClient/Resource"
   }
  },
  "TrinityUserPoolPostConfirmationCognito467F7114": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AuthHandler9DC767B7",
      "Arn"
     ]
    },
    "Principal": "cognito-idp.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "TrinityUserPool2A37BF21",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityUserPool/PostConfirmationCognito"
   }
  },
  "TrinityIdentityPool": {
   "Type": "AWS::Cognito::IdentityPool",
   "Properties": {
    "AllowUnauthenticatedIdentities": false,
    "CognitoIdentityProviders": [
     {
      "ClientId": {
       "Ref": "TrinityUserPoolTrinityMobileClientE4889438"
      },
      "ProviderName": {
       "Fn::GetAtt": [
        "TrinityUserPool2A37BF21",
        "ProviderName"
       ]
      },
      "ServerSideTokenCheck": true
     }
    ],
    "IdentityPoolName": "trinity_identity_pool_dev",
    "SupportedLoginProviders": {
     "accounts.google.com": "GOOGLE_CLIENT_ID_PLACEHOLDER"
    }
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityIdentityPool"
   }
  },
  "AuthHandlerServiceRoleD970A3A9": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/AuthHandler/ServiceRole/Resource"
   }
  },
  "AuthHandlerServiceRoleDefaultPolicy77B239DC": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "UsersTable9725E9C8",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AuthHandlerServiceRoleDefaultPolicy77B239DC",
    "Roles": [
     {
      "Ref": "AuthHandlerServiceRoleD970A3A9"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/AuthHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AuthHandler9DC767B7": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-847850007406-eu-west-1",
     "S3Key": "792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389.zip"
    },
    "Environment": {
     "Variables": {
      "USERS_TABLE": {
       "Ref": "UsersTable9725E9C8"
      },
      "ROOMS_TABLE": {
       "Ref": "RoomsTableA5C1D45B"
      },
      "ROOM_MEMBERS_TABLE": {
       "Ref": "RoomMembersTable66DCF076"
      },
      "VOTES_TABLE": {
       "Ref": "VotesTable39A917AC"
      },
      "USER_VOTES_TABLE": {
       "Ref": "UserVotesTable592E0AEF"
      },
      "MOVIES_CACHE_TABLE": {
       "Ref": "MoviesCacheTableE1998D48"
      },
      "STAGE": "dev",
      "RESERVED_CONCURRENCY": "10"
     }
    },
    "FunctionName": "trinity-auth-dev",
    "Handler": "auth.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "AuthHandlerServiceRoleD970A3A9",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 30
   },
   "DependsOn": [
    "AuthHandlerServiceRoleDefaultPolicy77B239DC",
    "AuthHandlerServiceRoleD970A3A9"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/AuthHandler/Resource",
    "aws:asset:path": "asset.792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "RoomHandlerServiceRole1ABC2E17": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/RoomHandler/ServiceRole/Resource"
   }
  },
  "RoomHandlerServiceRoleDefaultPolicy6585A656": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "RoomMembersTable66DCF076",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "RoomsTableA5C1D45B",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "RoomMembersTable66DCF076",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RoomHandlerServiceRoleDefaultPolicy6585A656",
    "Roles": [
     {
      "Ref": "RoomHandlerServiceRole1ABC2E17"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/RoomHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RoomHandlerCF7B6EB0": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-847850007406-eu-west-1",
     "S3Key": "792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389.zip"
    },
    "Environment": {
     "Variables": {
      "USERS_TABLE": {
       "Ref": "UsersTable9725E9C8"
      },
      "ROOMS_TABLE": {
       "Ref": "RoomsTableA5C1D45B"
      },
      "ROOM_MEMBERS_TABLE": {
       "Ref": "RoomMembersTable66DCF076"
      },
      "VOTES_TABLE": {
       "Ref": "VotesTable39A917AC"
      },
      "USER_VOTES_TABLE": {
       "Ref": "UserVotesTable592E0AEF"
      },
      "MOVIES_CACHE_TABLE": {
       "Ref": "MoviesCacheTableE1998D48"
      },
      "STAGE": "dev",
      "RESERVED_CONCURRENCY": "10"
     }
    },
    "FunctionName": "trinity-room-dev",
    "Handler": "room.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "RoomHandlerServiceRole1ABC2E17",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 30
   },
   "DependsOn": [
    "RoomHandlerServiceRoleDefaultPolicy6585A656",
    "RoomHandlerServiceRole1ABC2E17"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/RoomHandler/Resource",
    "aws:asset:path": "asset.792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "MovieHandlerServiceRoleC8E15675": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/MovieHandler/ServiceRole/Resource"
   }
  },
  "MovieHandlerServiceRoleDefaultPolicyE426CE08": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "MoviesCacheTableE1998D48",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "MovieHandlerServiceRoleDefaultPolicyE426CE08",
    "Roles": [
     {
      "Ref": "MovieHandlerServiceRoleC8E15675"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/MovieHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "MovieHandler51BC04A7": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-847850007406-eu-west-1",
     "S3Key": "792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389.zip"
    },
    "Environment": {
     "Variables": {
      "USERS_TABLE": {
       "Ref": "UsersTable9725E9C8"
      },
      "ROOMS_TABLE": {
       "Ref": "RoomsTableA5C1D45B"
      },
      "ROOM_MEMBERS_TABLE": {
       "Ref": "RoomMembersTable66DCF076"
      },
      "VOTES_TABLE": {
       "Ref": "VotesTable39A917AC"
      },
      "USER_VOTES_TABLE": {
       "Ref": "UserVotesTable592E0AEF"
      },
      "MOVIES_CACHE_TABLE": {
       "Ref": "MoviesCacheTableE1998D48"
      },
      "STAGE": "dev",
      "TMDB_API_KEY": "",
      "RESERVED_CONCURRENCY": "10"
     }
    },
    "FunctionName": "trinity-movie-dev",
    "Handler": "movie.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "MovieHandlerServiceRoleC8E15675",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 30
   },
   "DependsOn": [
    "MovieHandlerServiceRoleDefaultPolicyE426CE08",
    "MovieHandlerServiceRoleC8E15675"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/MovieHandler/Resource",
    "aws:asset:path": "asset.792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "VoteHandlerServiceRoleD1CC4A35": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/VoteHandler/ServiceRole/Resource"
   }
  },
  "VoteHandlerServiceRoleDefaultPolicy87A615E2": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "RoomsTableA5C1D45B",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "UserVotesTable592E0AEF",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "VotesTable39A917AC",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "RoomMembersTable66DCF076",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "RoomMembersTable66DCF076",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "VoteHandlerServiceRoleDefaultPolicy87A615E2",
    "Roles": [
     {
      "Ref": "VoteHandlerServiceRoleD1CC4A35"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/VoteHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "VoteHandler897F0396": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-847850007406-eu-west-1",
     "S3Key": "792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389.zip"
    },
    "Environment": {
     "Variables": {
      "USERS_TABLE": {
       "Ref": "UsersTable9725E9C8"
      },
      "ROOMS_TABLE": {
       "Ref": "RoomsTableA5C1D45B"
      },
      "ROOM_MEMBERS_TABLE": {
       "Ref": "RoomMembersTable66DCF076"
      },
      "VOTES_TABLE": {
       "Ref": "VotesTable39A917AC"
      },
      "USER_VOTES_TABLE": {
       "Ref": "UserVotesTable592E0AEF"
      },
      "MOVIES_CACHE_TABLE": {
       "Ref": "MoviesCacheTableE1998D48"
      },
      "STAGE": "dev",
      "RESERVED_CONCURRENCY": "10"
     }
    },
    "FunctionName": "trinity-vote-dev",
    "Handler": "vote.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "VoteHandlerServiceRoleD1CC4A35",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 30
   },
   "DependsOn": [
    "VoteHandlerServiceRoleDefaultPolicy87A615E2",
    "VoteHandlerServiceRoleD1CC4A35"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/VoteHandler/Resource",
    "aws:asset:path": "asset.792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "AIHandlerServiceRoleBE6AA9D7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/AIHandler/ServiceRole/Resource"
   }
  },
  "AIHandler5D68B6F1": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-847850007406-eu-west-1",
     "S3Key": "792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389.zip"
    },
    "Environment": {
     "Variables": {
      "USERS_TABLE": {
       "Ref": "UsersTable9725E9C8"
      },
      "ROOMS_TABLE": {
       "Ref": "RoomsTableA5C1D45B"
      },
      "ROOM_MEMBERS_TABLE": {
       "Ref": "RoomMembersTable66DCF076"
      },
      "VOTES_TABLE": {
       "Ref": "VotesTable39A917AC"
      },
      "USER_VOTES_TABLE": {
       "Ref": "UserVotesTable592E0AEF"
      },
      "MOVIES_CACHE_TABLE": {
       "Ref": "MoviesCacheTableE1998D48"
      },
      "STAGE": "dev",
      "HF_API_TOKEN": "",
      "RESERVED_CONCURRENCY": "10"
     }
    },
    "FunctionName": "trinity-ai-dev",
    "Handler": "ai.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "AIHandlerServiceRoleBE6AA9D7",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 30
   },
   "DependsOn": [
    "AIHandlerServiceRoleBE6AA9D7"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/AIHandler/Resource",
    "aws:asset:path": "asset.792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "RealtimeHandlerServiceRoleCFE7FFEB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/RealtimeHandler/ServiceRole/Resource"
   }
  },
  "RealtimeHandlerServiceRoleDefaultPolicy11BB9995": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "RoomMembersTable66DCF076",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "RoomMembersTable66DCF076",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RealtimeHandlerServiceRoleDefaultPolicy11BB9995",
    "Roles": [
     {
      "Ref": "RealtimeHandlerServiceRoleCFE7FFEB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/RealtimeHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RealtimeHandlerE448CE62": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-847850007406-eu-west-1",
     "S3Key": "792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389.zip"
    },
    "Environment": {
     "Variables": {
      "USERS_TABLE": {
       "Ref": "UsersTable9725E9C8"
      },
      "ROOMS_TABLE": {
       "Ref": "RoomsTableA5C1D45B"
      },
      "ROOM_MEMBERS_TABLE": {
       "Ref": "RoomMembersTable66DCF076"
      },
      "VOTES_TABLE": {
       "Ref": "VotesTable39A917AC"
      },
      "USER_VOTES_TABLE": {
       "Ref": "UserVotesTable592E0AEF"
      },
      "MOVIES_CACHE_TABLE": {
       "Ref": "MoviesCacheTableE1998D48"
      },
      "STAGE": "dev"
     }
    },
    "FunctionName": "trinity-realtime-dev",
    "Handler": "realtime.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "RealtimeHandlerServiceRoleCFE7FFEB",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 30
   },
   "DependsOn": [
    "RealtimeHandlerServiceRoleDefaultPolicy11BB9995",
    "RealtimeHandlerServiceRoleCFE7FFEB"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/RealtimeHandler/Resource",
    "aws:asset:path": "asset.792efb21210d30bb519cacaf101776d6368f2605ee46d5bb5dd0806a865d5389",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "TrinityGraphQLApiApiLogsRoleCFF907E4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/ApiLogsRole/Resource"
   }
  },
  "TrinityGraphQLApi1D4CC11E": {
   "Type": "AWS::AppSync::GraphQLApi",
   "Properties": {
    "AdditionalAuthenticationProviders": [
     {
      "AuthenticationType": "API_KEY"
     }
    ],
    "AuthenticationType": "AMAZON_COGNITO_USER_POOLS",
    "LogConfig": {
     "CloudWatchLogsRoleArn": {
      "Fn::GetAtt": [
       "TrinityGraphQLApiApiLogsRoleCFF907E4",
       "Arn"
      ]
     },
     "FieldLogLevel": "ERROR"
    },
    "Name": "trinity-api-dev",
    "UserPoolConfig": {
     "AwsRegion": "eu-west-1",
     "DefaultAction": "ALLOW",
     "UserPoolId": {
      "Ref": "TrinityUserPool2A37BF21"
     }
    },
    "XrayEnabled": false
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/Resource"
   }
  },
  "TrinityGraphQLApiSchema6986E358": {
   "Type": "AWS::AppSync::GraphQLSchema",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "Definition": "# Trinity MVP - GraphQL Schema with AppSync Real-time Subscriptions\r\n\r\n# Input Types\r\ninput CreateRoomInput {\r\n  name: String!\r\n  description: String\r\n  isPrivate: Boolean\r\n  maxMembers: Int\r\n}\r\n\r\ninput CreateRoomInputDebug {\r\n  name: String!\r\n}\r\n\r\ninput JoinRoomInput {\r\n  inviteCode: String!\r\n}\r\n\r\ninput VoteInput {\r\n  roomId: ID!\r\n  movieId: ID!\r\n  voteType: VoteType!\r\n}\r\n\r\n# Main Types\r\ntype Room {\r\n  id: ID!\r\n  name: String!\r\n  description: String\r\n  status: String!\r\n  resultMovieId: String\r\n  hostId: String!\r\n  inviteCode: String\r\n  isActive: Boolean!\r\n  isPrivate: Boolean!\r\n  memberCount: Int!\r\n  maxMembers: Int\r\n  createdAt: AWSDateTime!\r\n  updatedAt: AWSDateTime\r\n}\r\n\r\ntype Movie {\r\n  id: ID!\r\n  title: String!\r\n  poster: String\r\n  overview: String\r\n  vote_average: Float\r\n  release_date: String\r\n  genres: [Genre]\r\n  runtime: Int\r\n}\r\n\r\ntype Genre {\r\n  id: Int!\r\n  name: String!\r\n}\r\n\r\ntype User {\r\n  id: ID!\r\n  email: String!\r\n  name: String\r\n  picture: String\r\n  createdAt: AWSDateTime!\r\n}\r\n\r\n# Real-time Event Types\r\ninterface BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n}\r\n\r\ntype RoomEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  data: AWSJSON!\r\n}\r\n\r\ntype VoteEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  userId: ID!\r\n  mediaId: ID!\r\n  voteType: VoteType!\r\n  progress: VoteProgress!\r\n}\r\n\r\ntype MatchEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  matchId: ID!\r\n  mediaId: ID!\r\n  mediaTitle: String!\r\n  participants: [ID!]!\r\n  consensusType: ConsensusType!\r\n}\r\n\r\ntype MemberEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  userId: ID!\r\n  action: MemberAction!\r\n  memberCount: Int!\r\n  memberData: MemberData\r\n}\r\n\r\ntype RoleEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  targetUserId: ID!\r\n  roleId: ID!\r\n  roleName: String!\r\n  assignedBy: ID!\r\n  action: RoleAction!\r\n}\r\n\r\ntype ModerationEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  targetUserId: ID!\r\n  moderatorId: ID!\r\n  actionType: String!\r\n  reason: String!\r\n  duration: Int\r\n  expiresAt: AWSDateTime\r\n}\r\n\r\ntype ScheduleEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  scheduleId: ID!\r\n  title: String!\r\n  action: ScheduleAction!\r\n  startTime: AWSDateTime!\r\n  endTime: AWSDateTime!\r\n  message: String\r\n}\r\n\r\ntype ThemeEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  themeId: ID\r\n  themeName: String\r\n  action: ThemeAction!\r\n  appliedBy: ID!\r\n  customizations: AWSJSON\r\n}\r\n\r\ntype SettingsEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  settingKey: String!\r\n  oldValue: AWSJSON\r\n  newValue: AWSJSON!\r\n  changedBy: ID!\r\n  category: SettingsCategory!\r\n}\r\n\r\ntype ChatEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  messageId: ID!\r\n  userId: ID!\r\n  username: String!\r\n  content: String\r\n  messageType: ChatMessageType!\r\n  action: ChatAction!\r\n  metadata: AWSJSON\r\n}\r\n\r\ntype SuggestionEvent implements BaseEvent {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  roomId: ID!\r\n  eventType: String!\r\n  suggestionId: ID!\r\n  userId: ID!\r\n  username: String!\r\n  action: SuggestionAction!\r\n  suggestion: AWSJSON\r\n  vote: AWSJSON\r\n  comment: AWSJSON\r\n}\r\n\r\ntype UserNotification {\r\n  id: ID!\r\n  timestamp: AWSDateTime!\r\n  userId: ID!\r\n  type: NotificationType!\r\n  title: String!\r\n  message: String!\r\n  data: AWSJSON\r\n  read: Boolean!\r\n}\r\n\r\n# Supporting Types\r\ntype VoteProgress {\r\n  totalVotes: Int!\r\n  likesCount: Int!\r\n  dislikesCount: Int!\r\n  skipsCount: Int!\r\n  remainingUsers: Int!\r\n  percentage: Float!\r\n}\r\n\r\ntype MemberData {\r\n  role: String\r\n  status: String\r\n  permissions: [String!]\r\n  lastActivity: AWSDateTime\r\n}\r\n\r\n# Enums\r\nenum VoteType {\r\n  LIKE\r\n  DISLIKE\r\n  SKIP\r\n}\r\n\r\nenum ConsensusType {\r\n  UNANIMOUS\r\n  MAJORITY\r\n}\r\n\r\nenum MemberAction {\r\n  JOINED\r\n  LEFT\r\n  STATUS_CHANGED\r\n  ROLE_CHANGED\r\n}\r\n\r\nenum RoleAction {\r\n  ASSIGNED\r\n  REMOVED\r\n}\r\n\r\nenum ScheduleAction {\r\n  CREATED\r\n  UPDATED\r\n  CANCELLED\r\n  REMINDER\r\n}\r\n\r\nenum ThemeAction {\r\n  APPLIED\r\n  REMOVED\r\n  UPDATED\r\n}\r\n\r\nenum SettingsCategory {\r\n  PRIVACY\r\n  CONSENSUS\r\n  CAPACITY\r\n  TIMEOUT\r\n  OTHER\r\n}\r\n\r\nenum ChatMessageType {\r\n  TEXT\r\n  SYSTEM\r\n  REACTION\r\n}\r\n\r\nenum ChatAction {\r\n  CREATED\r\n  EDITED\r\n  DELETED\r\n  REACTION_ADDED\r\n  REACTION_REMOVED\r\n}\r\n\r\nenum SuggestionAction {\r\n  CREATED\r\n  VOTED\r\n  COMMENTED\r\n  APPROVED\r\n  REJECTED\r\n  IMPLEMENTED\r\n}\r\n\r\nenum NotificationType {\r\n  ROOM_INVITE\r\n  MATCH_FOUND\r\n  ROLE_ASSIGNED\r\n  MODERATION_ACTION\r\n  SCHEDULE_REMINDER\r\n  SYSTEM_MESSAGE\r\n}\r\n\r\n# Trini AI Response Type\r\ntype TriniResponse {\r\n  chatResponse: String!\r\n  recommendedGenres: [String!]!\r\n}\r\n\r\ntype Query {\r\n  getMovies(genre: String): [Movie]           # DataSource: MovieHandler\r\n  getChatRecommendations(text: String!): TriniResponse # DataSource: AIHandler (Trini)\r\n  getMyHistory: [Room]                        # DataSource: RoomHandler\r\n  getRoom(roomId: ID!): Room                  # DataSource: RoomHandler\r\n  getMovieDetails(movieId: String!): Movie    # DataSource: MovieHandler\r\n}\r\n\r\ntype Mutation {\r\n  createRoom(input: CreateRoomInput!): Room   # DataSource: RoomHandler\r\n  createRoomDebug(input: CreateRoomInputDebug!): Room   # DataSource: RoomHandler\r\n  createRoomSimple(name: String!): Room   # DataSource: RoomHandler\r\n  joinRoom(input: JoinRoomInput!): Room       # DataSource: RoomHandler\r\n  vote(input: VoteInput!): Room               # DataSource: VoteHandler\r\n  \r\n  # Real-time event publishing mutations\r\n  publishRoomEvent(roomId: ID!, eventType: String!, data: AWSJSON!): RoomEvent\r\n  publishVoteEvent(roomId: ID!, voteData: AWSJSON!): VoteEvent\r\n  publishMatchEvent(roomId: ID!, matchData: AWSJSON!): MatchEvent\r\n  publishMemberEvent(roomId: ID!, memberData: AWSJSON!): MemberEvent\r\n  publishRoleEvent(roomId: ID!, roleData: AWSJSON!): RoleEvent\r\n  publishModerationEvent(roomId: ID!, moderationData: AWSJSON!): ModerationEvent\r\n  publishScheduleEvent(roomId: ID!, scheduleData: AWSJSON!): ScheduleEvent\r\n  publishThemeEvent(roomId: ID!, themeData: AWSJSON!): ThemeEvent\r\n  publishSettingsEvent(roomId: ID!, settingsData: AWSJSON!): SettingsEvent\r\n  publishChatEvent(roomId: ID!, chatData: AWSJSON!): ChatEvent\r\n  publishSuggestionEvent(roomId: ID!, suggestionData: AWSJSON!): SuggestionEvent\r\n}\r\n\r\ntype Subscription {\r\n  # Room-level subscriptions\r\n  onRoomEvent(roomId: ID!): RoomEvent\r\n    @aws_subscribe(mutations: [\"publishRoomEvent\"])\r\n  \r\n  onVoteUpdate(roomId: ID!): VoteEvent\r\n    @aws_subscribe(mutations: [\"publishVoteEvent\"])\r\n  \r\n  onMatchFound(roomId: ID!): MatchEvent\r\n    @aws_subscribe(mutations: [\"publishMatchEvent\"])\r\n  \r\n  onMemberUpdate(roomId: ID!): MemberEvent\r\n    @aws_subscribe(mutations: [\"publishMemberEvent\"])\r\n  \r\n  # Advanced features subscriptions\r\n  onRoleAssignment(roomId: ID!): RoleEvent\r\n    @aws_subscribe(mutations: [\"publishRoleEvent\"])\r\n  \r\n  onModerationAction(roomId: ID!): ModerationEvent\r\n    @aws_subscribe(mutations: [\"publishModerationEvent\"])\r\n  \r\n  onScheduleEvent(roomId: ID!): ScheduleEvent\r\n    @aws_subscribe(mutations: [\"publishScheduleEvent\"])\r\n  \r\n  onThemeChange(roomId: ID!): ThemeEvent\r\n    @aws_subscribe(mutations: [\"publishThemeEvent\"])\r\n  \r\n  onSettingsChange(roomId: ID!): SettingsEvent\r\n    @aws_subscribe(mutations: [\"publishSettingsEvent\"])\r\n  \r\n  # Collaboration subscriptions\r\n  onChatMessage(roomId: ID!): ChatEvent\r\n    @aws_subscribe(mutations: [\"publishChatEvent\"])\r\n  \r\n  onContentSuggestion(roomId: ID!): SuggestionEvent\r\n    @aws_subscribe(mutations: [\"publishSuggestionEvent\"])\r\n  \r\n  # User-specific subscriptions - REMOVED: publishUserNotification mutation doesn't exist\r\n  # onUserNotification(userId: ID!): UserNotification\r\n  #   @aws_subscribe(mutations: [\"publishUserNotification\"])\r\n  \r\n  # Legacy subscription for backward compatibility\r\n  onRoomUpdated(roomId: ID!): Room\r\n    @aws_subscribe(mutations: [\"vote\", \"joinRoom\"])\r\n}\r\n\r\nschema {\r\n  query: Query\r\n  mutation: Mutation\r\n  subscription: Subscription\r\n}"
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/Schema"
   }
  },
  "TrinityGraphQLApiDefaultApiKey17C94109": {
   "Type": "AWS::AppSync::ApiKey",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "Expires": 1798828776
   },
   "DependsOn": [
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/DefaultApiKey"
   }
  },
  "TrinityGraphQLApiAuthDataSourceServiceRoleAE9333AA": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/AuthDataSource/ServiceRole/Resource"
   }
  },
  "TrinityGraphQLApiAuthDataSourceServiceRoleDefaultPolicy043525F5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AuthHandler9DC767B7",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AuthHandler9DC767B7",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "TrinityGraphQLApiAuthDataSourceServiceRoleDefaultPolicy043525F5",
    "Roles": [
     {
      "Ref": "TrinityGraphQLApiAuthDataSourceServiceRoleAE9333AA"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/AuthDataSource/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "TrinityGraphQLApiAuthDataSource1AE57B40": {
   "Type": "AWS::AppSync::DataSource",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "LambdaConfig": {
     "LambdaFunctionArn": {
      "Fn::GetAtt": [
       "AuthHandler9DC767B7",
       "Arn"
      ]
     }
    },
    "Name": "AuthDataSource",
    "ServiceRoleArn": {
     "Fn::GetAtt": [
      "TrinityGraphQLApiAuthDataSourceServiceRoleAE9333AA",
      "Arn"
     ]
    },
    "Type": "AWS_LAMBDA"
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/AuthDataSource/Resource"
   }
  },
  "TrinityGraphQLApiRoomDataSourceServiceRole3D967D03": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/RoomDataSource/ServiceRole/Resource"
   }
  },
  "TrinityGraphQLApiRoomDataSourceServiceRoleDefaultPolicy5529DCEA": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "RoomHandlerCF7B6EB0",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "RoomHandlerCF7B6EB0",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "TrinityGraphQLApiRoomDataSourceServiceRoleDefaultPolicy5529DCEA",
    "Roles": [
     {
      "Ref": "TrinityGraphQLApiRoomDataSourceServiceRole3D967D03"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/RoomDataSource/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "TrinityGraphQLApiRoomDataSource82006ECF": {
   "Type": "AWS::AppSync::DataSource",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "LambdaConfig": {
     "LambdaFunctionArn": {
      "Fn::GetAtt": [
       "RoomHandlerCF7B6EB0",
       "Arn"
      ]
     }
    },
    "Name": "RoomDataSource",
    "ServiceRoleArn": {
     "Fn::GetAtt": [
      "TrinityGraphQLApiRoomDataSourceServiceRole3D967D03",
      "Arn"
     ]
    },
    "Type": "AWS_LAMBDA"
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/RoomDataSource/Resource"
   }
  },
  "TrinityGraphQLApiMovieDataSourceServiceRole573EF30B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/MovieDataSource/ServiceRole/Resource"
   }
  },
  "TrinityGraphQLApiMovieDataSourceServiceRoleDefaultPolicy96D09C1C": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "MovieHandler51BC04A7",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "MovieHandler51BC04A7",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "TrinityGraphQLApiMovieDataSourceServiceRoleDefaultPolicy96D09C1C",
    "Roles": [
     {
      "Ref": "TrinityGraphQLApiMovieDataSourceServiceRole573EF30B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/MovieDataSource/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "TrinityGraphQLApiMovieDataSource51FEFFC3": {
   "Type": "AWS::AppSync::DataSource",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "LambdaConfig": {
     "LambdaFunctionArn": {
      "Fn::GetAtt": [
       "MovieHandler51BC04A7",
       "Arn"
      ]
     }
    },
    "Name": "MovieDataSource",
    "ServiceRoleArn": {
     "Fn::GetAtt": [
      "TrinityGraphQLApiMovieDataSourceServiceRole573EF30B",
      "Arn"
     ]
    },
    "Type": "AWS_LAMBDA"
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/MovieDataSource/Resource"
   }
  },
  "TrinityGraphQLApiVoteDataSourceServiceRole50B6F338": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/VoteDataSource/ServiceRole/Resource"
   }
  },
  "TrinityGraphQLApiVoteDataSourceServiceRoleDefaultPolicy082DBDDE": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "VoteHandler897F0396",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "VoteHandler897F0396",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "TrinityGraphQLApiVoteDataSourceServiceRoleDefaultPolicy082DBDDE",
    "Roles": [
     {
      "Ref": "TrinityGraphQLApiVoteDataSourceServiceRole50B6F338"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/VoteDataSource/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "TrinityGraphQLApiVoteDataSource9F1FC398": {
   "Type": "AWS::AppSync::DataSource",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "LambdaConfig": {
     "LambdaFunctionArn": {
      "Fn::GetAtt": [
       "VoteHandler897F0396",
       "Arn"
      ]
     }
    },
    "Name": "VoteDataSource",
    "ServiceRoleArn": {
     "Fn::GetAtt": [
      "TrinityGraphQLApiVoteDataSourceServiceRole50B6F338",
      "Arn"
     ]
    },
    "Type": "AWS_LAMBDA"
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/VoteDataSource/Resource"
   }
  },
  "TrinityGraphQLApiAIDataSourceServiceRole1000DC2A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/AIDataSource/ServiceRole/Resource"
   }
  },
  "TrinityGraphQLApiAIDataSourceServiceRoleDefaultPolicy975912FD": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AIHandler5D68B6F1",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AIHandler5D68B6F1",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "TrinityGraphQLApiAIDataSourceServiceRoleDefaultPolicy975912FD",
    "Roles": [
     {
      "Ref": "TrinityGraphQLApiAIDataSourceServiceRole1000DC2A"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/AIDataSource/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "TrinityGraphQLApiAIDataSourceCB67F05B": {
   "Type": "AWS::AppSync::DataSource",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "LambdaConfig": {
     "LambdaFunctionArn": {
      "Fn::GetAtt": [
       "AIHandler5D68B6F1",
       "Arn"
      ]
     }
    },
    "Name": "AIDataSource",
    "ServiceRoleArn": {
     "Fn::GetAtt": [
      "TrinityGraphQLApiAIDataSourceServiceRole1000DC2A",
      "Arn"
     ]
    },
    "Type": "AWS_LAMBDA"
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/AIDataSource/Resource"
   }
  },
  "TrinityGraphQLApiRealtimeDataSourceServiceRole8BC6F6A4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/RealtimeDataSource/ServiceRole/Resource"
   }
  },
  "TrinityGraphQLApiRealtimeDataSourceServiceRoleDefaultPolicy1745A7F9": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "RealtimeHandlerE448CE62",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "RealtimeHandlerE448CE62",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "TrinityGraphQLApiRealtimeDataSourceServiceRoleDefaultPolicy1745A7F9",
    "Roles": [
     {
      "Ref": "TrinityGraphQLApiRealtimeDataSourceServiceRole8BC6F6A4"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/RealtimeDataSource/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "TrinityGraphQLApiRealtimeDataSource97A87834": {
   "Type": "AWS::AppSync::DataSource",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "LambdaConfig": {
     "LambdaFunctionArn": {
      "Fn::GetAtt": [
       "RealtimeHandlerE448CE62",
       "Arn"
      ]
     }
    },
    "Name": "RealtimeDataSource",
    "ServiceRoleArn": {
     "Fn::GetAtt": [
      "TrinityGraphQLApiRealtimeDataSourceServiceRole8BC6F6A4",
      "Arn"
     ]
    },
    "Type": "AWS_LAMBDA"
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/RealtimeDataSource/Resource"
   }
  },
  "TrinityGraphQLApiGetMoviesResolver9125698F": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "MovieDataSource",
    "FieldName": "getMovies",
    "Kind": "UNIT",
    "TypeName": "Query"
   },
   "DependsOn": [
    "TrinityGraphQLApiMovieDataSource51FEFFC3",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/GetMoviesResolver/Resource"
   }
  },
  "TrinityGraphQLApiGetChatRecommendationsResolver4210623A": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "AIDataSource",
    "FieldName": "getChatRecommendations",
    "Kind": "UNIT",
    "TypeName": "Query"
   },
   "DependsOn": [
    "TrinityGraphQLApiAIDataSourceCB67F05B",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/GetChatRecommendationsResolver/Resource"
   }
  },
  "TrinityGraphQLApiGetMyHistoryResolver279EAD74": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RoomDataSource",
    "FieldName": "getMyHistory",
    "Kind": "UNIT",
    "TypeName": "Query"
   },
   "DependsOn": [
    "TrinityGraphQLApiRoomDataSource82006ECF",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/GetMyHistoryResolver/Resource"
   }
  },
  "TrinityGraphQLApiGetRoomResolver909E0E9E": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RoomDataSource",
    "FieldName": "getRoom",
    "Kind": "UNIT",
    "TypeName": "Query"
   },
   "DependsOn": [
    "TrinityGraphQLApiRoomDataSource82006ECF",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/GetRoomResolver/Resource"
   }
  },
  "TrinityGraphQLApiGetMovieDetailsResolver4A6A05EA": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "MovieDataSource",
    "FieldName": "getMovieDetails",
    "Kind": "UNIT",
    "TypeName": "Query"
   },
   "DependsOn": [
    "TrinityGraphQLApiMovieDataSource51FEFFC3",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/GetMovieDetailsResolver/Resource"
   }
  },
  "TrinityGraphQLApiCreateRoomResolver75F89F45": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RoomDataSource",
    "FieldName": "createRoom",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRoomDataSource82006ECF",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/CreateRoomResolver/Resource"
   }
  },
  "TrinityGraphQLApiCreateRoomDebugResolver402AFF79": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RoomDataSource",
    "FieldName": "createRoomDebug",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRoomDataSource82006ECF",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/CreateRoomDebugResolver/Resource"
   }
  },
  "TrinityGraphQLApiCreateRoomSimpleResolver6B377A97": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RoomDataSource",
    "FieldName": "createRoomSimple",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRoomDataSource82006ECF",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/CreateRoomSimpleResolver/Resource"
   }
  },
  "TrinityGraphQLApiJoinRoomResolver057359F8": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RoomDataSource",
    "FieldName": "joinRoom",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRoomDataSource82006ECF",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/JoinRoomResolver/Resource"
   }
  },
  "TrinityGraphQLApiVoteResolver7A6D1215": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "VoteDataSource",
    "FieldName": "vote",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiSchema6986E358",
    "TrinityGraphQLApiVoteDataSource9F1FC398"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/VoteResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishRoomEventResolver7E7E69F5": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishRoomEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishRoomEventResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishVoteEventResolverD347FB07": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishVoteEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishVoteEventResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishMatchEventResolver27978895": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishMatchEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishMatchEventResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishMemberEventResolverB89DB5EC": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishMemberEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishMemberEventResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishRoleEventResolver72F757C5": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishRoleEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishRoleEventResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishModerationEventResolverB059DFF6": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishModerationEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishModerationEventResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishScheduleEventResolver27FFF260": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishScheduleEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishScheduleEventResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishThemeEventResolver5497A6D6": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishThemeEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishThemeEventResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishSettingsEventResolver9C3519AB": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishSettingsEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishSettingsEventResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishChatEventResolver26267A43": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishChatEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishChatEventResolver/Resource"
   }
  },
  "TrinityGraphQLApiPublishSuggestionEventResolver2B4EE956": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "TrinityGraphQLApi1D4CC11E",
      "ApiId"
     ]
    },
    "DataSourceName": "RealtimeDataSource",
    "FieldName": "publishSuggestionEvent",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "TrinityGraphQLApiRealtimeDataSource97A87834",
    "TrinityGraphQLApiSchema6986E358"
   ],
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/TrinityGraphQLApi/PublishSuggestionEventResolver/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/1WOTU/CQBCGfwv3ZazgxSPUaIwkItUzmW4HGNju1s4W0mz6380uonCa5/2Y5J3AfZZBNsKTjHV1GBsuIRQe9UHhSdah6i3WriohfGJpSOUbm2BQ2m0tewfhS6hdOmdi9scXyA2T9dfRv/NakfXs++gOymBdVggh39gltTWLsLPqubPaR8g39sKDYqwhrNx5T7pLZ1j3UZ5pUDJdowh5gVk8SqYw7/SB/ByFFDaN9FZDeGmx2X2bWcPxOamPxa0q9I5qjMas4Tfq1SJNfUKPhetanVZcqRWJM0dq07hfHoZkpzztKTxu2W5j573zTecv7VgZlHUVwV7ujpMHeIRstBfmcdtZzzXB6nx/APyAjBi8AQAA"
   },
   "Metadata": {
    "aws:cdk:path": "TrinityMvpStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "GraphQLApiUrl": {
   "Description": "URL de la API GraphQL",
   "Value": {
    "Fn::GetAtt": [
     "TrinityGraphQLApi1D4CC11E",
     "GraphQLUrl"
    ]
   }
  },
  "GraphQLApiId": {
   "Description": "ID de la API GraphQL",
   "Value": {
    "Fn::GetAtt": [
     "TrinityGraphQLApi1D4CC11E",
     "ApiId"
    ]
   }
  },
  "UserPoolId": {
   "Description": "ID del User Pool de Cognito",
   "Value": {
    "Ref": "TrinityUserPool2A37BF21"
   }
  },
  "UserPoolClientId": {
   "Description": "ID del User Pool Client para la app m√≥vil",
   "Value": {
    "Ref": "TrinityUserPoolTrinityMobileClientE4889438"
   }
  },
  "IdentityPoolId": {
   "Description": "ID del Identity Pool de Cognito para federated auth",
   "Value": {
    "Ref": "TrinityIdentityPool"
   }
  },
  "Region": {
   "Description": "Regi√≥n de AWS",
   "Value": "eu-west-1"
  },
  "AuthHandlerName": {
   "Value": {
    "Ref": "AuthHandler9DC767B7"
   }
  },
  "RoomHandlerName": {
   "Value": {
    "Ref": "RoomHandlerCF7B6EB0"
   }
  },
  "MovieHandlerName": {
   "Value": {
    "Ref": "MovieHandler51BC04A7"
   }
  },
  "VoteHandlerName": {
   "Value": {
    "Ref": "VoteHandler897F0396"
   }
  },
  "AIHandlerName": {
   "Value": {
    "Ref": "AIHandler5D68B6F1"
   }
  },
  "RealtimeHandlerName": {
   "Value": {
    "Ref": "RealtimeHandlerE448CE62"
   }
  },
  "ExportsOutputRefAuthHandler9DC767B711DCB76A": {
   "Value": {
    "Ref": "AuthHandler9DC767B7"
   },
   "Export": {
    "Name": "TrinityMvpStack:ExportsOutputRefAuthHandler9DC767B711DCB76A"
   }
  },
  "ExportsOutputRefRoomHandlerCF7B6EB08F83255F": {
   "Value": {
    "Ref": "RoomHandlerCF7B6EB0"
   },
   "Export": {
    "Name": "TrinityMvpStack:ExportsOutputRefRoomHandlerCF7B6EB08F83255F"
   }
  },
  "ExportsOutputRefMovieHandler51BC04A76EBE3534": {
   "Value": {
    "Ref": "MovieHandler51BC04A7"
   },
   "Export": {
    "Name": "TrinityMvpStack:ExportsOutputRefMovieHandler51BC04A76EBE3534"
   }
  },
  "ExportsOutputRefVoteHandler897F0396D465FCE8": {
   "Value": {
    "Ref": "VoteHandler897F0396"
   },
   "Export": {
    "Name": "TrinityMvpStack:ExportsOutputRefVoteHandler897F0396D465FCE8"
   }
  },
  "ExportsOutputRefAIHandler5D68B6F1A53B1EB9": {
   "Value": {
    "Ref": "AIHandler5D68B6F1"
   },
   "Export": {
    "Name": "TrinityMvpStack:ExportsOutputRefAIHandler5D68B6F1A53B1EB9"
   }
  },
  "ExportsOutputRefUsersTable9725E9C857961836": {
   "Value": {
    "Ref": "UsersTable9725E9C8"
   },
   "Export": {
    "Name": "TrinityMvpStack:ExportsOutputRefUsersTable9725E9C857961836"
   }
  },
  "ExportsOutputRefRoomsTableA5C1D45BCB51EC57": {
   "Value": {
    "Ref": "RoomsTableA5C1D45B"
   },
   "Export": {
    "Name": "TrinityMvpStack:ExportsOutputRefRoomsTableA5C1D45BCB51EC57"
   }
  },
  "ExportsOutputRefRoomMembersTable66DCF076A160DBBD": {
   "Value": {
    "Ref": "RoomMembersTable66DCF076"
   },
   "Export": {
    "Name": "TrinityMvpStack:ExportsOutputRefRoomMembersTable66DCF076A160DBBD"
   }
  },
  "ExportsOutputRefVotesTable39A917ACAB0439C7": {
   "Value": {
    "Ref": "VotesTable39A917AC"
   },
   "Export": {
    "Name": "TrinityMvpStack:ExportsOutputRefVotesTable39A917ACAB0439C7"
   }
  },
  "ExportsOutputRefMoviesCacheTableE1998D4813880915": {
   "Value": {
    "Ref": "MoviesCacheTableE1998D48"
   },
   "Export": {
    "Name": "TrinityMvpStack:ExportsOutputRefMoviesCacheTableE1998D4813880915"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}